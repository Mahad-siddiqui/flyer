{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { withAuth } from \"next-auth/middleware\";\nimport { NextResponse } from \"next/server\";\n\nexport default withAuth(\n  function middleware(req) {\n    // Allow access to public routes and API webhooks\n    if (\n      req.nextUrl.pathname.startsWith(\"/api/webhook\") ||\n      req.nextUrl.pathname.startsWith(\"/api/auth\")\n    ) {\n      return NextResponse.next();\n    }\n\n    // Check if user is trying to access admin routes\n    if (req.nextUrl.pathname.startsWith(\"/admin\")) {\n      // Add admin check logic here if needed\n      return NextResponse.redirect(new URL(\"/dashboard\", req.url));\n    }\n\n    return NextResponse.next();\n  },\n  {\n    callbacks: {\n      authorized: ({ token, req }) => {\n        const { pathname } = req.nextUrl;\n\n        // Allow access to public routes\n        if (\n          pathname.startsWith(\"/api/webhook\") ||\n          pathname.startsWith(\"/api/auth\") ||\n          pathname === \"/\" ||\n          pathname.startsWith(\"/auth/\") ||\n          pathname.startsWith(\"/pricing\") ||\n          pathname.startsWith(\"/terms\") ||\n          pathname.startsWith(\"/privacy\")\n        ) {\n          return true;\n        }\n\n        // Require authentication for dashboard and protected API routes\n        if (\n          pathname.startsWith(\"/dashboard\") ||\n          pathname.startsWith(\"/api/flyers\") ||\n          pathname.startsWith(\"/api/user\") ||\n          pathname.startsWith(\"/api/stripe/checkout\") ||\n          pathname.startsWith(\"/api/stripe/portal\")\n        ) {\n          return !!token;\n        }\n\n        return true;\n      },\n    },\n  }\n);\n\nexport const config = {\n  matcher: [\n    \"/dashboard/:path*\",\n    \"/admin/:path*\",\n    \"/api/flyers/:path*\",\n    \"/api/user/:path*\",\n    \"/api/stripe/checkout\",\n    \"/api/stripe/portal\",\n  ],\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;uCAEe,CAAA,GAAA,kJAAA,CAAA,WAAQ,AAAD,EACpB,SAAS,WAAW,GAAG;IACrB,iDAAiD;IACjD,IACE,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,mBAChC,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,cAChC;QACA,OAAO,6LAAA,CAAA,eAAY,CAAC,IAAI;IAC1B;IAEA,iDAAiD;IACjD,IAAI,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW;QAC7C,uCAAuC;QACvC,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc,IAAI,GAAG;IAC5D;IAEA,OAAO,6LAAA,CAAA,eAAY,CAAC,IAAI;AAC1B,GACA;IACE,WAAW;QACT,YAAY,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE;YACzB,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,OAAO;YAEhC,gCAAgC;YAChC,IACE,SAAS,UAAU,CAAC,mBACpB,SAAS,UAAU,CAAC,gBACpB,aAAa,OACb,SAAS,UAAU,CAAC,aACpB,SAAS,UAAU,CAAC,eACpB,SAAS,UAAU,CAAC,aACpB,SAAS,UAAU,CAAC,aACpB;gBACA,OAAO;YACT;YAEA,gEAAgE;YAChE,IACE,SAAS,UAAU,CAAC,iBACpB,SAAS,UAAU,CAAC,kBACpB,SAAS,UAAU,CAAC,gBACpB,SAAS,UAAU,CAAC,2BACpB,SAAS,UAAU,CAAC,uBACpB;gBACA,OAAO,CAAC,CAAC;YACX;YAEA,OAAO;QACT;IACF;AACF;AAGK,MAAM,SAAS;IACpB,SAAS;QACP;QACA;QACA;QACA;QACA;QACA;KACD;AACH"}}]
}